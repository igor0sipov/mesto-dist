(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._selectorsObject=e,this._currentForm=n,this._inputList=Array.from(n.querySelectorAll(this._selectorsObject.input))}var n,r;return n=t,(r=[{key:"_showError",value:function(e){this._errorElement=this._currentForm.querySelector(".".concat(e.id,"-error")),e.classList.add(this._selectorsObject.inputError),this._errorElement.textContent=e.validationMessage,this._errorElement.classList.add(this._selectorsObject.errorVisible)}},{key:"_hideError",value:function(e){this._errorElement=this._currentForm.querySelector(".".concat(e.id,"-error")),e.classList.remove(this._selectorsObject.inputError),this._errorElement.textContent="",this._errorElement.classList.remove(this._selectorsObject.errorVisible)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideError(e):this._showError(e)}},{key:"_hasInpvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){var e=this._currentForm.querySelector(this._selectorsObject.submitButton);this._hasInpvalidInput()?(e.setAttribute("disabled","true"),e.classList.add(this._selectorsObject.inactiveButton)):(e.classList.remove(this._selectorsObject.inactiveButton),e.removeAttribute("disabled"))}},{key:"_setListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"validate",value:function(){var e=this;this._inputList.forEach((function(t){e._checkInputValidity(t),e._toggleButtonState()}))}},{key:"clear",value:function(){var e=this;this._inputList.forEach((function(t){e._hideError(t)}))}},{key:"enableValidation",value:function(){this._currentForm.addEventListener("submit",(function(e){e.preventDefault()})),this._setListeners()}}])&&e(n.prototype,r),t}(),n=document.querySelector(".profile__edit-button"),r=document.querySelector(".profile__name"),o=document.querySelector(".profile__bio"),i=document.querySelector(".profile__avatar"),u=document.querySelector(".profile__edit-avatar-button"),c=document.querySelector(".update-avatar"),a=document.forms.updateAvatar,s=document.querySelector(".confirm-delete"),l=document.querySelector(".edit-profile"),f=document.forms.editProfileForm,h=document.querySelector(".profile__add-button"),p=document.querySelector(".add-place"),d=document.forms.addPlaceForm,_=document.querySelector(".elements"),v=document.querySelector(".fullsize-picture"),y="86dbbabbe99c68a05ddfc98c",m={form:".form",input:".popup__input",submitButton:".popup__submit-button",inactiveButton:"popup__submit-button_disabled",inputError:"popup__input_type_error",errorVisible:"popup__input-error_visible"},b={cardTemplate:".card-template",card:".element",picture:".element__picture",title:".element__name",likeButton:".element__like-button",likeButtonActive:"element__like-button_active",deleteButton:".element__delete-button",hiddenDeleteButton:"element__delete-button_hidden",likeCounter:".element__like-counter"},k={openedPopup:"popup_opened",form:".form",closeButton:".popup__close-icon",title:"popup__title",picture:".popup__picture",input:".popup__input",submitButton:".popup__submit-button",caption:".popup__caption"};function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._selectors=n,this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add(this._selectors.openedPopup),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove(this._selectors.openedPopup),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_closeByOverlay",value:function(e){e.target===e.currentTarget&&this.close()}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(this._selectors.closeButton).addEventListener("click",(function(){e.close()})),this._popup.addEventListener("click",(function(t){e._closeByOverlay(t)}))}}])&&g(t.prototype,n),e}();function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t,n){return(L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(r);if(o){var n=O(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function u(e,t){var n,r=e.popup,o=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,r,t))._form=n._popup.querySelector(n._selectors.form),n._handleFormSubmit=o,n._submitButtonDefaultText=n._popup.querySelector(".popup__submit-button").textContent,n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=Array.from(this._form.querySelectorAll(this._selectors.input)),t={};return e.forEach((function(e){t["".concat(e.name)]=e.value})),t}},{key:"setLoadingState",value:function(e){this._popup.querySelector(".popup__submit-button").textContent=e?"Cохранение...":this._submitButtonDefaultText}},{key:"_submitHandler",value:function(e){this.setLoadingState(!0),e.preventDefault();var t=this._getInputValues();this._handleFormSubmit(t)}},{key:"close",value:function(){L(O(u.prototype),"close",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){L(O(u.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",this._submitHandler.bind(this))}}])&&S(t.prototype,n),u}(C);function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=function(){function e(t){var n=t.name,r=t.bio;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n,this._bio=r}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,bio:this._bio.textContent}}},{key:"setUserInfo",value:function(e){var t=e.newName,n=e.newBio;this._name.textContent=t,this._bio.textContent=n}}])&&B(t.prototype,n),e}();function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._token=t.token,this._userProfileUrl=t.userProfileUrl,this._cardsUrl=t.cardsUrl}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return fetch(this._userProfileUrl,{headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"getCards",value:function(){return fetch(this._cardsUrl,{headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"editProfile",value:function(e){var t=e.name,n=e.about;return fetch(this._userProfileUrl,{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return fetch(this._cardsUrl,{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:n})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"deleteCard",value:function(e){return fetch(this._cardsUrl+e,{method:"DELETE",headers:{authorization:this._token}}).then((function(e){return e.ok?e:Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"like",value:function(e){return fetch(this._cardsUrl+"likes/"+e,{method:"PUT",headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"removeLike",value:function(e){return fetch(this._cardsUrl+"likes/"+e,{method:"DELETE",headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"updateAvatar",value:function(e){return fetch(this._userProfileUrl+"avatar/",{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).then((function(e){return e})).catch((function(e){console.log(e)}))}}])&&I(t.prototype,n),e}();function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(t,n,r){var o=t.data,i=t.handleCardClick,u=t.handleLikeButtonClick,c=t.handleDeleteButtonClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=o,this._handleCardClick=i,this._handleLikeButtonClick=u,this._handleDeleteButtonClick=c,this._selectors=n,this._myId=r}var t,n;return t=e,(n=[{key:"_openFullsizePhoto",value:function(){this._handleCardClick({image:this._data.link,title:this._data.name})}},{key:"_getTemplate",value:function(){return document.querySelector(this._selectors.cardTemplate).content.cloneNode(!0)}},{key:"_like",value:function(e){e.classList.add(this._selectors.likeButtonActive)}},{key:"_removeLike",value:function(e){e.classList.remove(this._selectors.likeButtonActive)}},{key:"_getMyLike",value:function(e){var t=this;return e.likes.filter((function(e){return e._id===t._myId}))}},{key:"_setEventListeners",value:function(e){var t=this;e.likeButton.addEventListener("click",(function(){t._like(e.likeButton),t._handleLikeButtonClick(t._data._id).then((function(n){t._getMyLike(n).length>0?(t._like(e.likeButton),e.likeCounter.textContent=n.likes.length):(t._removeLike(e.likeButton),e.likeCounter.textContent=n.likes.length)}))})),e.deleteButton.addEventListener("click",(function(){t._handleDeleteButtonClick(t._data._id)})),e.picture.addEventListener("click",this._openFullsizePhoto.bind(this))}},{key:"initializeCard",value:function(){var e=this._getTemplate(),t={card:e.querySelector(this._selectors.card),picture:e.querySelector(this._selectors.picture),title:e.querySelector(this._selectors.title),likeButton:e.querySelector(this._selectors.likeButton),likeCounter:e.querySelector(this._selectors.likeCounter),deleteButton:e.querySelector(this._selectors.deleteButton)};return this._setEventListeners(t),t.picture.src=this._data.link,t.title.textContent=this._data.name,t.card.id=this._data._id,this._data.likes&&(t.likeCounter.textContent=this._data.likes.length),this._data.owner._id!==this._myId&&t.deleteButton.classList.add(this._selectors.hiddenDeleteButton),this._getMyLike(this._data).length>0&&this._like(t.likeButton),e}}])&&U(t.prototype,n),e}();function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=n}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&D(t.prototype,n),e}();function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t,n){return(V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=M(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=M(r);if(o){var n=M(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return H(this,e)});function u(){return F(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"open",value:function(e,t){var n=this._popup.querySelector(this._selectors.picture),r=this._popup.querySelector(this._selectors.caption);n.src=e,r.textContent=t,n.alt=t,V(M(u.prototype),"open",this).call(this)}}])&&z(t.prototype,n),u}(C),G=new T({token:"fe948c7b-c7fe-4065-b9c1-1b820e5df7d7",userProfileUrl:"https://mesto.nomoreparties.co/v1/cohort-17/users/me/",cardsUrl:"https://mesto.nomoreparties.co/v1/cohort-17/cards/"});G.getUserInfo().then((function(e){r.textContent=e.name,o.textContent=e.about,i.src=e.avatar})),G.getCards().then((function(e){$(e)}));var K=new t(m,f);K.enableValidation();var Q=new t(m,d);Q.enableValidation();var W=new t(m,a);W.enableValidation();var X=new q({name:r,bio:o}),Y=new P({popup:l,handleFormSubmit:function(e){G.editProfile({name:e.name,about:e.bio}).then((function(){G.getUserInfo().then((function(e){X.setUserInfo({newName:e.name,newBio:e.about})})),Y.close(),Y.setLoadingState(!1)}))}},k);Y.setEventListeners();var Z=function(e){return new x({data:e,handleCardClick:function(e){var t=e.image,n=e.title;te.open(t,n)},handleDeleteButtonClick:function(e){s.id=e,ne.open()},handleLikeButtonClick:function(e){return G.getCards().then((function(t){var n=t.filter((function(t){return t._id===e}))[0];return n.likes.length>0&&n.likes.filter((function(e){return e._id===y})).length>0?G.removeLike(e):G.like(e)}))}},b,y)},$=function(e){var t=new R({items:e,renderer:function(e){var n=Z(e).initializeCard();t.addItem(n)}},_);t.renderItems()},ee=new P({popup:p,handleFormSubmit:function(e){G.addCard({name:e.title,link:e.url}).then((function(e){var t=Z(e).initializeCard();_.prepend(t),ee.close(),ee.setLoadingState(!1)}))}},k);ee.setEventListeners();var te=new J(v,k);te.setEventListeners();var ne=new P({popup:s,handleFormSubmit:function(){G.deleteCard(s.id).then((function(e){if(e.ok){var t=Array.from(document.querySelectorAll(".element")).filter((function(e){return e.id===s.id}));t[0].remove(),t[0]=null}ne.close(),ne.setLoadingState(!1)}))}},k);ne.setEventListeners();var re=new P({popup:c,handleFormSubmit:function(e){G.updateAvatar(e.avatar).then((function(){G.getUserInfo().then((function(e){i.src=e.avatar})),re.close(),re.setLoadingState(!1)}))}},k);re.setEventListeners(),n.addEventListener("click",(function(){var e=X.getUserInfo();f.elements.name.value=e.name,f.elements.bio.value=e.bio,K.validate(),Y.open()})),h.addEventListener("click",(function(){Q.validate(),Q.clear(),ee.open()})),u.addEventListener("click",(function(){W.validate(),W.clear(),re.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJzZWxlY3RvcnNPYmplY3QiLCJjdXJyZW50Rm9ybSIsInRoaXMiLCJfc2VsZWN0b3JzT2JqZWN0IiwiX2N1cnJlbnRGb3JtIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dCIsImN1cnJlbnRJbnB1dCIsIl9lcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbnB1dEVycm9yIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yVmlzaWJsZSIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUVycm9yIiwiX3Nob3dFcnJvciIsInNvbWUiLCJpbnB1dEVsZW1lbnQiLCJfYnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvbiIsIl9oYXNJbnB2YWxpZElucHV0Iiwic2V0QXR0cmlidXRlIiwiaW5hY3RpdmVCdXR0b24iLCJyZW1vdmVBdHRyaWJ1dGUiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiX3NldExpc3RlbmVycyIsImVkaXRQcm9maWxlQnV0dG9uIiwiZG9jdW1lbnQiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVCaW8iLCJwcm9maWxlQXZhdGFyIiwiZWRpdEF2YXRhckJ1dHRvbiIsInVwZGF0ZUF2YXRhclBvcHVwIiwidXBkYXRlQXZhdGFyRm9ybSIsImZvcm1zIiwidXBkYXRlQXZhdGFyIiwiY29uZmlybURlbGV0ZVBvcHVwIiwiZWRpdFByb2ZpbGVQb3B1cCIsImVkaXRQcm9maWxlRm9ybSIsImFkZFBsYWNlQnV0dG9uIiwiYWRkUGxhY2VQb3B1cCIsImFkZFBsYWNlRm9ybSIsImVsZW1lbnRzIiwiZnVsbHNpemVQaWN0dXJlUG9wdXAiLCJteUlkIiwidmFsaWRhdGlvblNlbGVjdG9ycyIsImZvcm0iLCJjYXJkU2VsZWN0b3JzIiwiY2FyZFRlbXBsYXRlIiwiY2FyZCIsInBpY3R1cmUiLCJ0aXRsZSIsImxpa2VCdXR0b24iLCJsaWtlQnV0dG9uQWN0aXZlIiwiZGVsZXRlQnV0dG9uIiwiaGlkZGVuRGVsZXRlQnV0dG9uIiwibGlrZUNvdW50ZXIiLCJwb3B1cFNlbGVjdG9ycyIsIm9wZW5lZFBvcHVwIiwiY2xvc2VCdXR0b24iLCJjYXB0aW9uIiwiUG9wdXAiLCJwb3B1cCIsInNlbGVjdG9ycyIsIl9wb3B1cCIsIl9zZWxlY3RvcnMiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJjbG9zZSIsImtleSIsIl9jbG9zZUJ5T3ZlcmxheSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9zdWJtaXRCdXR0b25EZWZhdWx0VGV4dCIsImlucHV0TGlzdCIsImlucHV0VmFsdWVzIiwibmFtZSIsInZhbHVlIiwiaXNMb2FkaW5nIiwic2V0TG9hZGluZ1N0YXRlIiwicG9wdXBJbnB1dHMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIl9zdWJtaXRIYW5kbGVyIiwiVXNlckluZm8iLCJiaW8iLCJfbmFtZSIsIl9iaW8iLCJuZXdOYW1lIiwibmV3QmlvIiwiQXBpIiwiY29uZmlnIiwiX3Rva2VuIiwidG9rZW4iLCJfdXNlclByb2ZpbGVVcmwiLCJ1c2VyUHJvZmlsZVVybCIsIl9jYXJkc1VybCIsImNhcmRzVXJsIiwiZmV0Y2giLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInRoZW4iLCJyZXN1bHQiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZGF0YSIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibGluayIsImF2YXRhciIsIkNhcmQiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVMaWtlQnV0dG9uQ2xpY2siLCJoYW5kbGVEZWxldGVCdXR0b25DbGljayIsIl9kYXRhIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVMaWtlQnV0dG9uQ2xpY2siLCJfaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2siLCJfbXlJZCIsImltYWdlIiwiY29udGVudCIsImNsb25lTm9kZSIsImVsZW0iLCJsaWtlcyIsImZpbHRlciIsImxpa2UiLCJfaWQiLCJjYXJkRWxlbWVudHMiLCJfbGlrZSIsImxpa2VJbmZvIiwiX2dldE15TGlrZSIsImxlbmd0aCIsIl9yZW1vdmVMaWtlIiwiX29wZW5GdWxsc2l6ZVBob3RvIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwic3JjIiwib3duZXIiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsImFwcGVuZCIsIml0ZW0iLCJQb3B1cFdpdGhJbWFnZSIsInNvdXJjZSIsInBvcHVwUGljdHVyZSIsInBvcHVwQ2FwdGlvbiIsImFsdCIsImFwaSIsImdldFVzZXJJbmZvIiwiaW5mbyIsImdldENhcmRzIiwiY2FyZHNJbmZvIiwicmVuZGVyQmFzZUNhcmRzIiwiZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBsYWNlRm9ybVZhbGlkYXRvciIsInVwZGF0ZUF2YXRhckZvcm1WYWxpZGF0b3IiLCJ1c2VySW5mbyIsImVkaXRQb3B1cCIsInByb2ZpbGVQb3B1cElucHV0cyIsImVkaXRQcm9maWxlIiwic2V0VXNlckluZm8iLCJzZXRFdmVudExpc3RlbmVycyIsInJlbmRlckNhcmRzIiwiY2FyZERhdGEiLCJwaWN0dXJlUG9wdXAiLCJvcGVuIiwiZGVsZXRlUG9wdXAiLCJjYXJkcyIsInJlbW92ZUxpa2UiLCJjYXJkc0luZm9BcnJheSIsInNlY3Rpb24iLCJjYXJkRWxlbWVudCIsImluaXRpYWxpemVDYXJkIiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwicGxhY2VQb3B1cCIsInBsYWNlUG9wdXBJbnB1dHMiLCJhZGRDYXJkIiwidXJsIiwiY2FyZEluZm8iLCJkZWxldGVDYXJkIiwiY3VycmVudENhcmQiLCJhdmF0YXJQb3B1cCIsImF2YXRhclBvcHVwSW5wdXQiLCJwcm9maWxlSW5mbyIsInZhbGlkYXRlIiwiY2xlYXIiXSwibWFwcGluZ3MiOiI2TEFBcUJBLEUsV0FDbkIsV0FBWUMsRUFBaUJDLEksNEZBQWEsU0FDeENDLEtBQUtDLGlCQUFtQkgsRUFDeEJFLEtBQUtFLGFBQWVILEVBQ3BCQyxLQUFLRyxXQUFhQyxNQUFNQyxLQUN0Qk4sRUFBWU8saUJBQWlCTixLQUFLQyxpQkFBaUJNLFEsd0RBSTVDQyxHQUNUUixLQUFLUyxjQUFnQlQsS0FBS0UsYUFBYVEsY0FBbEIs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QUFZakIsVyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yc09iamVjdCwgY3VycmVudEZvcm0pIHtcbiAgICB0aGlzLl9zZWxlY3RvcnNPYmplY3QgPSBzZWxlY3RvcnNPYmplY3Q7XG4gICAgdGhpcy5fY3VycmVudEZvcm0gPSBjdXJyZW50Rm9ybTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgY3VycmVudEZvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZWxlY3RvcnNPYmplY3QuaW5wdXQpXG4gICAgKTtcbiAgfVxuXG4gIF9zaG93RXJyb3IoY3VycmVudElucHV0KSB7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fY3VycmVudEZvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtjdXJyZW50SW5wdXQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgY3VycmVudElucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5fc2VsZWN0b3JzT2JqZWN0LmlucHV0RXJyb3IpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGN1cnJlbnRJbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZWxlY3RvcnNPYmplY3QuZXJyb3JWaXNpYmxlKTtcbiAgfVxuXG4gIF9oaWRlRXJyb3IoY3VycmVudElucHV0KSB7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fY3VycmVudEZvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtjdXJyZW50SW5wdXQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgY3VycmVudElucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2VsZWN0b3JzT2JqZWN0LmlucHV0RXJyb3IpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2VsZWN0b3JzT2JqZWN0LmVycm9yVmlzaWJsZSk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGN1cnJlbnRJbnB1dCkge1xuICAgIGlmICghY3VycmVudElucHV0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93RXJyb3IoY3VycmVudElucHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUVycm9yKGN1cnJlbnRJbnB1dCk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0lucHZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGNvbnN0IF9idXR0b25FbGVtZW50ID0gdGhpcy5fY3VycmVudEZvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3NlbGVjdG9yc09iamVjdC5zdWJtaXRCdXR0b25cbiAgICApO1xuXG4gICAgaWYgKHRoaXMuX2hhc0lucHZhbGlkSW5wdXQoKSkge1xuICAgICAgX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZWxlY3RvcnNPYmplY3QuaW5hY3RpdmVCdXR0b24pO1xuICAgIH0gZWxzZSB7XG4gICAgICBfYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NlbGVjdG9yc09iamVjdC5pbmFjdGl2ZUJ1dHRvbik7XG4gICAgICBfYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICB9XG4gIH1cblxuICBfc2V0TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChjdXJyZW50SW5wdXQpID0+IHtcbiAgICAgIGN1cnJlbnRJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoY3VycmVudElucHV0KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgdmFsaWRhdGUoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGN1cnJlbnRJbnB1dCkgPT4ge1xuICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGN1cnJlbnRJbnB1dCk7XG4gICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGN1cnJlbnRJbnB1dCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUVycm9yKGN1cnJlbnRJbnB1dCk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIGNvbnN0IHN1Ym1pdEZvcm1IYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG4gICAgdGhpcy5fY3VycmVudEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBzdWJtaXRGb3JtSGFuZGxlcik7XG4gICAgdGhpcy5fc2V0TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQmlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19iaW9cIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XHJcblxyXG5leHBvcnQgY29uc3QgZWRpdEF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fZWRpdC1hdmF0YXItYnV0dG9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHVwZGF0ZUF2YXRhclBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi51cGRhdGUtYXZhdGFyXCIpO1xyXG5leHBvcnQgY29uc3QgdXBkYXRlQXZhdGFyRm9ybSA9IGRvY3VtZW50LmZvcm1zLnVwZGF0ZUF2YXRhcjtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maXJtRGVsZXRlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbmZpcm0tZGVsZXRlXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtcHJvZmlsZVwiKTtcclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zLmVkaXRQcm9maWxlRm9ybTtcclxuXHJcbmV4cG9ydCBjb25zdCBhZGRQbGFjZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZFBsYWNlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1wbGFjZVwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZFBsYWNlRm9ybSA9IGRvY3VtZW50LmZvcm1zLmFkZFBsYWNlRm9ybTtcclxuXHJcbmV4cG9ydCBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNcIik7XHJcblxyXG5leHBvcnQgY29uc3QgZnVsbHNpemVQaWN0dXJlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZ1bGxzaXplLXBpY3R1cmVcIik7XHJcblxyXG5leHBvcnQgY29uc3QgbXlJZCA9IFwiODZkYmJhYmJlOTljNjhhMDVkZGZjOThjXCI7XHJcblxyXG5leHBvcnQgY29uc3QgYXBpQ29uZmlnID0ge1xyXG4gIHRva2VuOiBcImZlOTQ4YzdiLWM3ZmUtNDA2NS1iOWMxLTFiODIwZTVkZjdkN1wiLFxyXG4gIHVzZXJQcm9maWxlVXJsOiBcImh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMTcvdXNlcnMvbWUvXCIsXHJcbiAgY2FyZHNVcmw6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0xNy9jYXJkcy9cIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2VsZWN0b3JzID0ge1xyXG4gIGZvcm06IFwiLmZvcm1cIixcclxuICBpbnB1dDogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uOiBcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uOiBcInBvcHVwX19zdWJtaXQtYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvcjogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yVmlzaWJsZTogXCJwb3B1cF9faW5wdXQtZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRTZWxlY3RvcnMgPSB7XHJcbiAgY2FyZFRlbXBsYXRlOiBcIi5jYXJkLXRlbXBsYXRlXCIsXHJcbiAgY2FyZDogXCIuZWxlbWVudFwiLFxyXG4gIHBpY3R1cmU6IFwiLmVsZW1lbnRfX3BpY3R1cmVcIixcclxuICB0aXRsZTogXCIuZWxlbWVudF9fbmFtZVwiLFxyXG4gIGxpa2VCdXR0b246IFwiLmVsZW1lbnRfX2xpa2UtYnV0dG9uXCIsXHJcbiAgbGlrZUJ1dHRvbkFjdGl2ZTogXCJlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmVcIixcclxuICBkZWxldGVCdXR0b246IFwiLmVsZW1lbnRfX2RlbGV0ZS1idXR0b25cIixcclxuICBoaWRkZW5EZWxldGVCdXR0b246IFwiZWxlbWVudF9fZGVsZXRlLWJ1dHRvbl9oaWRkZW5cIixcclxuICBsaWtlQ291bnRlcjogXCIuZWxlbWVudF9fbGlrZS1jb3VudGVyXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcG9wdXBTZWxlY3RvcnMgPSB7XHJcbiAgb3BlbmVkUG9wdXA6IFwicG9wdXBfb3BlbmVkXCIsXHJcbiAgZm9ybTogXCIuZm9ybVwiLFxyXG4gIGNsb3NlQnV0dG9uOiBcIi5wb3B1cF9fY2xvc2UtaWNvblwiLFxyXG4gIHRpdGxlOiBcInBvcHVwX190aXRsZVwiLFxyXG4gIHBpY3R1cmU6IFwiLnBvcHVwX19waWN0dXJlXCIsXHJcbiAgaW5wdXQ6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvbjogXCIucG9wdXBfX3N1Ym1pdC1idXR0b25cIixcclxuICBjYXB0aW9uOiBcIi5wb3B1cF9fY2FwdGlvblwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHBsYWNlQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgdGl0bGU6IFwi0JDQu9GC0LDQuVwiLFxyXG4gICAgaW1hZ2U6XHJcbiAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MDAxMDE0NjA5NDItZjkxODU0YmU0MmU0P2l4bGliPXJiLTEuMi4xJml4aWQ9ZXlKaGNIQmZhV1FpT2pFeU1EZDkmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xMjY3JnE9ODBcIixcclxuICAgIGFsdDogXCLQlNC+0YDQvtCz0LAg0LIg0YXQstC+0LnQvdC+0Lwg0LvQtdGB0YNcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcItCV0LrQsNGC0LXRgNC40L3QsdGD0YDQs1wiLFxyXG4gICAgaW1hZ2U6XHJcbiAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MjY3MjIwMjExOTItMWMwZGM5YjA5MjFkP2l4bGliPXJiLTEuMi4xJml4aWQ9ZXlKaGNIQmZhV1FpT2pFeU1EZDkmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xNDg5JnE9ODBcIixcclxuICAgIGFsdDogXCLQpNC+0YLQviDQldC60LDRgtC10YDQuNC90LHRg9GA0LPQsCDRgSDQstGL0YHQvtGC0YtcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcItCa0LjQvdC10YDQvNCwXCIsXHJcbiAgICBpbWFnZTpcclxuICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU1OTAyOTg4NC00ZTM0MDkzZGI1Yjc/aXhsaWI9cmItMS4yLjEmaXhpZD1leUpoY0hCZmFXUWlPakl4TVRJemZRJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTM0OSZxPTgwXCIsXHJcbiAgICBhbHQ6IFwi0JTQstCwINC00LXRgNC10LLRj9C90L3Ri9GFINC00L7QvNC40LrQsCwg0LjQtNC10YIg0YHQvdC10LNcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcItCa0LDQu9GD0LPQsFwiLFxyXG4gICAgaW1hZ2U6XHJcbiAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MDU1NTEwNzE0ODctZDRhM2ZkMzg0ODU3P2l4bGliPXJiLTEuMi4xJml4aWQ9ZXlKaGNIQmZhV1FpT2pFeU1EZDkmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xNDg5JnE9ODBcIixcclxuICAgIGFsdDogXCLQoNC10LrQsCDQsiDQu9C10YHRgyDQvtC60YPRgtCw0L3QsCDRgtGD0LzQsNC90L7QvFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwi0KXQuNC50LTQtdC90YHQtdC70YzQs9CwXCIsXHJcbiAgICBpbWFnZTpcclxuICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU1OTAyOTg4NC1lOTU5MjQ5MjM2Mjk/aXhsaWI9cmItMS4yLjEmaXhpZD1leUpoY0hCZmFXUWlPakV5TURkOSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTEzNTAmcT04MFwiLFxyXG4gICAgYWx0OiBcItCU0LLQsCDQtNC10YDQtdCy0Y/QvdC90YvRhSDQtNC+0LzQuNC60LAg0LIg0YHQvdC10LPRgyDRgyDRgNC10LrQuCDQvdCwINCx0LXRgNC10LPRgyDQutC+0YLRgNC+0Lkg0LvQvtC00LrQsFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwi0JTRg9C90LjQu9C+0LLQvlwiLFxyXG4gICAgaW1hZ2U6XHJcbiAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NzA1Nzk0MjUxNDQtNDZiY2YwNjRkYjg0P2l4bGliPXJiLTEuMi4xJml4aWQ9ZXlKaGNIQmZhV1FpT2pFeU1EZDkmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02NzUmcT04MFwiLFxyXG4gICAgYWx0OiBcItCm0LXRgNC60L7QstGMINGB0YDQtdC00Lgg0LTQtdGA0LXQstGM0LXQsiDQsiDQv9C+0LvQtVwiLFxyXG4gIH0sXHJcbl07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXAsIHNlbGVjdG9ycykge1xuICAgIHRoaXMuX3BvcHVwID0gcG9wdXA7XG4gICAgdGhpcy5fc2VsZWN0b3JzID0gc2VsZWN0b3JzO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZWxlY3RvcnMub3BlbmVkUG9wdXApO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NlbGVjdG9ycy5vcGVuZWRQb3B1cCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9jbG9zZUJ5T3ZlcmxheShldnQpIHtcbiAgICBpZiAoZXZ0LnRhcmdldCAhPT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5jbG9zZSgpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9ycy5jbG9zZUJ1dHRvbilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9KTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgdGhpcy5fY2xvc2VCeU92ZXJsYXkoZXZ0KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXAsIGhhbmRsZUZvcm1TdWJtaXQgfSwgc2VsZWN0b3JzKSB7XHJcbiAgICBzdXBlcihwb3B1cCwgc2VsZWN0b3JzKTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9ycy5mb3JtKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uRGVmYXVsdFRleHQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiXHJcbiAgICApLnRleHRDb250ZW50O1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NlbGVjdG9ycy5pbnB1dClcclxuICAgICk7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2Ake2lucHV0Lm5hbWV9YF0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldExvYWRpbmdTdGF0ZShpc0xvYWRpbmcpIHtcclxuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3N1Ym1pdC1idXR0b25cIik7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQ9C+0YXRgNCw0L3QtdC90LjQtS4uLlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uRGVmYXVsdFRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc3VibWl0SGFuZGxlcihldmVudCkge1xyXG4gICAgdGhpcy5zZXRMb2FkaW5nU3RhdGUodHJ1ZSk7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgcG9wdXBJbnB1dHMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChwb3B1cElucHV0cyk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX3N1Ym1pdEhhbmRsZXIuYmluZCh0aGlzKSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBiaW8gfSkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2JpbyA9IGJpbztcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgYmlvOiB0aGlzLl9iaW8udGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmV3TmFtZSwgbmV3QmlvIH0pIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmV3TmFtZTtcbiAgICB0aGlzLl9iaW8udGV4dENvbnRlbnQgPSBuZXdCaW87XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XHJcbiAgICB0aGlzLl90b2tlbiA9IGNvbmZpZy50b2tlbjtcclxuICAgIHRoaXMuX3VzZXJQcm9maWxlVXJsID0gY29uZmlnLnVzZXJQcm9maWxlVXJsO1xyXG4gICAgdGhpcy5fY2FyZHNVcmwgPSBjb25maWcuY2FyZHNVcmw7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl91c2VyUHJvZmlsZVVybCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQub2spIHtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlc3VsdC5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQuanNvbigpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fY2FyZHNVcmwsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgIGlmICghcmVzdWx0Lm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXN1bHQuc3RhdHVzfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0Lmpzb24oKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGVkaXRQcm9maWxlKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX3VzZXJQcm9maWxlVXJsLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBhYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQub2spIHtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlc3VsdC5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQuanNvbigpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2NhcmRzVXJsLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgbGluazogbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQub2spIHtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlc3VsdC5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQuanNvbigpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2NhcmRzVXJsICsgaWQsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQub2spIHtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlc3VsdC5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBsaWtlKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fY2FyZHNVcmwgKyBcImxpa2VzL1wiICsgaWQsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQub2spIHtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlc3VsdC5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQuanNvbigpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTGlrZShpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2NhcmRzVXJsICsgXCJsaWtlcy9cIiArIGlkLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgIGlmICghcmVzdWx0Lm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXN1bHQuc3RhdHVzfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0Lmpzb24oKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZUF2YXRhcihhdmF0YXIpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl91c2VyUHJvZmlsZVVybCArIFwiYXZhdGFyL1wiLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGF2YXRhcixcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQub2spIHtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlc3VsdC5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQuanNvbigpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHsgZGF0YSwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVMaWtlQnV0dG9uQ2xpY2ssIGhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrIH0sXHJcbiAgICBjYXJkU2VsZWN0b3JzLFxyXG4gICAgbXlJZFxyXG4gICkge1xyXG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uQ2xpY2sgPSBoYW5kbGVMaWtlQnV0dG9uQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b25DbGljayA9IGhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrO1xyXG4gICAgdGhpcy5fc2VsZWN0b3JzID0gY2FyZFNlbGVjdG9ycztcclxuICAgIHRoaXMuX215SWQgPSBteUlkO1xyXG4gIH1cclxuXHJcbiAgX29wZW5GdWxsc2l6ZVBob3RvKCkge1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHtcclxuICAgICAgaW1hZ2U6IHRoaXMuX2RhdGEubGluayxcclxuICAgICAgdGl0bGU6IHRoaXMuX2RhdGEubmFtZSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgX3RlbXBsYXRlQ29udGVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9ycy5jYXJkVGVtcGxhdGUpXHJcbiAgICAgIC5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHJldHVybiBfdGVtcGxhdGVDb250ZW50O1xyXG4gIH1cclxuXHJcbiAgX2xpa2UoZWxlbSkge1xyXG4gICAgZWxlbS5jbGFzc0xpc3QuYWRkKHRoaXMuX3NlbGVjdG9ycy5saWtlQnV0dG9uQWN0aXZlKTtcclxuICB9XHJcblxyXG4gIF9yZW1vdmVMaWtlKGVsZW0pIHtcclxuICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZWxlY3RvcnMubGlrZUJ1dHRvbkFjdGl2ZSk7XHJcbiAgfVxyXG5cclxuICBfZ2V0TXlMaWtlKGRhdGEpIHtcclxuICAgIHJldHVybiBkYXRhLmxpa2VzLmZpbHRlcigobGlrZSkgPT4gbGlrZS5faWQgPT09IHRoaXMuX215SWQpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKGNhcmRFbGVtZW50cykge1xyXG4gICAgY2FyZEVsZW1lbnRzLmxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5fbGlrZShjYXJkRWxlbWVudHMubGlrZUJ1dHRvbik7XHJcbiAgICAgIGNvbnN0IGxpa2VEYXRhID0gdGhpcy5faGFuZGxlTGlrZUJ1dHRvbkNsaWNrKHRoaXMuX2RhdGEuX2lkKTtcclxuICAgICAgbGlrZURhdGEudGhlbigobGlrZUluZm8pID0+IHtcclxuICAgICAgICBjb25zdCBteUxpa2UgPSB0aGlzLl9nZXRNeUxpa2UobGlrZUluZm8pO1xyXG4gICAgICAgIGlmIChteUxpa2UubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgdGhpcy5fbGlrZShjYXJkRWxlbWVudHMubGlrZUJ1dHRvbik7XHJcbiAgICAgICAgICBjYXJkRWxlbWVudHMubGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBsaWtlSW5mby5saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuX3JlbW92ZUxpa2UoY2FyZEVsZW1lbnRzLmxpa2VCdXR0b24pO1xyXG4gICAgICAgICAgY2FyZEVsZW1lbnRzLmxpa2VDb3VudGVyLnRleHRDb250ZW50ID0gbGlrZUluZm8ubGlrZXMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjYXJkRWxlbWVudHMuZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrKHRoaXMuX2RhdGEuX2lkKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNhcmRFbGVtZW50cy5waWN0dXJlLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIFwiY2xpY2tcIixcclxuICAgICAgdGhpcy5fb3BlbkZ1bGxzaXplUGhvdG8uYmluZCh0aGlzKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGluaXRpYWxpemVDYXJkKCkge1xyXG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50cyA9IHtcclxuICAgICAgY2FyZDogY2FyZFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzLmNhcmQpLFxyXG4gICAgICBwaWN0dXJlOiBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnMucGljdHVyZSksXHJcbiAgICAgIHRpdGxlOiBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnMudGl0bGUpLFxyXG4gICAgICBsaWtlQnV0dG9uOiBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnMubGlrZUJ1dHRvbiksXHJcbiAgICAgIGxpa2VDb3VudGVyOiBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnMubGlrZUNvdW50ZXIpLFxyXG4gICAgICBkZWxldGVCdXR0b246IGNhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9ycy5kZWxldGVCdXR0b24pLFxyXG4gICAgfTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKGNhcmRFbGVtZW50cyk7XHJcblxyXG4gICAgY2FyZEVsZW1lbnRzLnBpY3R1cmUuc3JjID0gdGhpcy5fZGF0YS5saW5rO1xyXG4gICAgY2FyZEVsZW1lbnRzLnRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fZGF0YS5uYW1lO1xyXG4gICAgY2FyZEVsZW1lbnRzLmNhcmQuaWQgPSB0aGlzLl9kYXRhLl9pZDtcclxuXHJcbiAgICBpZiAodGhpcy5fZGF0YS5saWtlcykge1xyXG4gICAgICBjYXJkRWxlbWVudHMubGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9kYXRhLmxpa2VzLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5fZGF0YS5vd25lci5faWQgIT09IHRoaXMuX215SWQpIHtcclxuICAgICAgY2FyZEVsZW1lbnRzLmRlbGV0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgIHRoaXMuX3NlbGVjdG9ycy5oaWRkZW5EZWxldGVCdXR0b25cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBteUxpa2UgPSB0aGlzLl9nZXRNeUxpa2UodGhpcy5fZGF0YSk7XHJcbiAgICBpZiAobXlMaWtlLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5fbGlrZShjYXJkRWxlbWVudHMubGlrZUJ1dHRvbik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNhcmRUZW1wbGF0ZTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXJTZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgb3Blbihzb3VyY2UsIHRpdGxlKSB7XG4gICAgY29uc3QgcG9wdXBQaWN0dXJlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnMucGljdHVyZSk7XG4gICAgY29uc3QgcG9wdXBDYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnMuY2FwdGlvbik7XG4gICAgcG9wdXBQaWN0dXJlLnNyYyA9IHNvdXJjZTtcbiAgICBwb3B1cENhcHRpb24udGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICBwb3B1cFBpY3R1cmUuYWx0ID0gdGl0bGU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgZWRpdFByb2ZpbGVCdXR0b24sXHJcbiAgcHJvZmlsZU5hbWUsXHJcbiAgcHJvZmlsZUJpbyxcclxuICBlZGl0UHJvZmlsZVBvcHVwLFxyXG4gIGVkaXRQcm9maWxlRm9ybSxcclxuICBhZGRQbGFjZUJ1dHRvbixcclxuICBhZGRQbGFjZVBvcHVwLFxyXG4gIGFkZFBsYWNlRm9ybSxcclxuICBjb25maXJtRGVsZXRlUG9wdXAsXHJcbiAgZWxlbWVudHMsXHJcbiAgZnVsbHNpemVQaWN0dXJlUG9wdXAsXHJcbiAgdmFsaWRhdGlvblNlbGVjdG9ycyxcclxuICBjYXJkU2VsZWN0b3JzLFxyXG4gIHBvcHVwU2VsZWN0b3JzLFxyXG4gIG15SWQsXHJcbiAgYXBpQ29uZmlnLFxyXG4gIHByb2ZpbGVBdmF0YXIsXHJcbiAgZWRpdEF2YXRhckJ1dHRvbixcclxuICB1cGRhdGVBdmF0YXJQb3B1cCxcclxuICB1cGRhdGVBdmF0YXJGb3JtLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuXHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuXHJcbi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PUFQST09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaUNvbmZpZyk7XHJcblxyXG5hcGkuZ2V0VXNlckluZm8oKS50aGVuKChpbmZvKSA9PiB7XHJcbiAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBpbmZvLm5hbWU7XHJcbiAgcHJvZmlsZUJpby50ZXh0Q29udGVudCA9IGluZm8uYWJvdXQ7XHJcbiAgcHJvZmlsZUF2YXRhci5zcmMgPSBpbmZvLmF2YXRhcjtcclxufSk7XHJcblxyXG5hcGkuZ2V0Q2FyZHMoKS50aGVuKChjYXJkc0luZm8pID0+IHtcclxuICByZW5kZXJCYXNlQ2FyZHMoY2FyZHNJbmZvKTtcclxufSk7XHJcblxyXG4vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT12YWxpZGF0aW9uPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uU2VsZWN0b3JzLFxyXG4gIGVkaXRQcm9maWxlRm9ybVxyXG4pO1xyXG5lZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgcGxhY2VGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNlbGVjdG9ycywgYWRkUGxhY2VGb3JtKTtcclxucGxhY2VGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHVwZGF0ZUF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uU2VsZWN0b3JzLFxyXG4gIHVwZGF0ZUF2YXRhckZvcm1cclxuKTtcclxudXBkYXRlQXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PXBvcHVwcz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZTogcHJvZmlsZU5hbWUsXHJcbiAgYmlvOiBwcm9maWxlQmlvLFxyXG59KTtcclxuXHJcbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHtcclxuICAgIHBvcHVwOiBlZGl0UHJvZmlsZVBvcHVwLFxyXG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogKHByb2ZpbGVQb3B1cElucHV0cykgPT4ge1xyXG4gICAgICBhcGlcclxuICAgICAgICAuZWRpdFByb2ZpbGUoe1xyXG4gICAgICAgICAgbmFtZTogcHJvZmlsZVBvcHVwSW5wdXRzLm5hbWUsXHJcbiAgICAgICAgICBhYm91dDogcHJvZmlsZVBvcHVwSW5wdXRzLmJpbyxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIGFwaS5nZXRVc2VySW5mbygpLnRoZW4oKGluZm8pID0+IHtcclxuICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICAgICAgICAgIG5ld05hbWU6IGluZm8ubmFtZSxcclxuICAgICAgICAgICAgICBuZXdCaW86IGluZm8uYWJvdXQsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBlZGl0UG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgIGVkaXRQb3B1cC5zZXRMb2FkaW5nU3RhdGUoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIHBvcHVwU2VsZWN0b3JzXHJcbik7XHJcbmVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcmVuZGVyQ2FyZHMgPSAoY2FyZERhdGEpID0+IHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICB7XHJcbiAgICAgIGRhdGE6IGNhcmREYXRhLFxyXG4gICAgICBoYW5kbGVDYXJkQ2xpY2s6ICh7IGltYWdlLCB0aXRsZSB9KSA9PiB7XHJcbiAgICAgICAgcGljdHVyZVBvcHVwLm9wZW4oaW1hZ2UsIHRpdGxlKTtcclxuICAgICAgfSxcclxuICAgICAgaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2s6IChpZCkgPT4ge1xyXG4gICAgICAgIGNvbmZpcm1EZWxldGVQb3B1cC5pZCA9IGlkO1xyXG4gICAgICAgIGRlbGV0ZVBvcHVwLm9wZW4oKTtcclxuICAgICAgfSxcclxuICAgICAgaGFuZGxlTGlrZUJ1dHRvbkNsaWNrOiAoaWQpID0+IHtcclxuICAgICAgICByZXR1cm4gYXBpLmdldENhcmRzKCkudGhlbigoY2FyZHMpID0+IHtcclxuICAgICAgICAgIGNvbnN0IGNhcmQgPSBjYXJkcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uX2lkID09PSBpZClbMF07IC8vINCy0YvQsdC40YDQsNC10Lwg0L3Rg9C20L3Rg9GOINC60LDRgNGC0L7Rh9C60YNcclxuICAgICAgICAgIGlmIChjYXJkLmxpa2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8g0L/RgNC+0LLQtdGA0Y/QtdC8INC90LDQu9C40YfQuNC1INC70LDQudC60L7QslxyXG4gICAgICAgICAgICBjb25zdCBsaWtlID0gY2FyZC5saWtlcy5maWx0ZXIoKGxpa2UpID0+IGxpa2UuX2lkID09PSBteUlkKTtcclxuICAgICAgICAgICAgaWYgKGxpa2UubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgIC8vINC/0YDQvtCy0LXRgNGP0LXQvCDQvdCw0LvQuNGH0LjQtSDQvNC+0LXQs9C+INC70LDQudC60LBcclxuICAgICAgICAgICAgICByZXR1cm4gYXBpLnJlbW92ZUxpa2UoaWQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHJldHVybiBhcGkubGlrZShpZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhcGkubGlrZShpZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgY2FyZFNlbGVjdG9ycyxcclxuICAgIG15SWRcclxuICApO1xyXG4gIHJldHVybiBjYXJkO1xyXG59O1xyXG5cclxuY29uc3QgcmVuZGVyQmFzZUNhcmRzID0gKGNhcmRzSW5mb0FycmF5KSA9PiB7XHJcbiAgY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAge1xyXG4gICAgICBpdGVtczogY2FyZHNJbmZvQXJyYXksXHJcbiAgICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkID0gcmVuZGVyQ2FyZHMoY2FyZERhdGEpO1xyXG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5pbml0aWFsaXplQ2FyZCgpO1xyXG4gICAgICAgIHNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgZWxlbWVudHNcclxuICApO1xyXG4gIHNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxufTtcclxuXHJcbmNvbnN0IHBsYWNlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICB7XHJcbiAgICBwb3B1cDogYWRkUGxhY2VQb3B1cCxcclxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChwbGFjZVBvcHVwSW5wdXRzKSA9PiB7XHJcbiAgICAgIGFwaVxyXG4gICAgICAgIC5hZGRDYXJkKHtcclxuICAgICAgICAgIG5hbWU6IHBsYWNlUG9wdXBJbnB1dHMudGl0bGUsXHJcbiAgICAgICAgICBsaW5rOiBwbGFjZVBvcHVwSW5wdXRzLnVybCxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKChjYXJkSW5mbykgPT4ge1xyXG4gICAgICAgICAgY29uc3QgY2FyZCA9IHJlbmRlckNhcmRzKGNhcmRJbmZvKTtcclxuICAgICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5pbml0aWFsaXplQ2FyZCgpO1xyXG4gICAgICAgICAgZWxlbWVudHMucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgICAgICAgICBwbGFjZVBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgICBwbGFjZVBvcHVwLnNldExvYWRpbmdTdGF0ZShmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgcG9wdXBTZWxlY3RvcnNcclxuKTtcclxucGxhY2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcGljdHVyZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKGZ1bGxzaXplUGljdHVyZVBvcHVwLCBwb3B1cFNlbGVjdG9ycyk7XHJcbnBpY3R1cmVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgZGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICB7XHJcbiAgICBwb3B1cDogY29uZmlybURlbGV0ZVBvcHVwLFxyXG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogKCkgPT4ge1xyXG4gICAgICBhcGkuZGVsZXRlQ2FyZChjb25maXJtRGVsZXRlUG9wdXAuaWQpLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgIGlmIChyZXN1bHQub2spIHtcclxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRDYXJkID0gQXJyYXkuZnJvbShcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5lbGVtZW50XCIpXHJcbiAgICAgICAgICApLmZpbHRlcigoY2FyZCkgPT4gY2FyZC5pZCA9PT0gY29uZmlybURlbGV0ZVBvcHVwLmlkKTtcclxuICAgICAgICAgIGN1cnJlbnRDYXJkWzBdLnJlbW92ZSgpO1xyXG4gICAgICAgICAgY3VycmVudENhcmRbMF0gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGVQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgIGRlbGV0ZVBvcHVwLnNldExvYWRpbmdTdGF0ZShmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIHBvcHVwU2VsZWN0b3JzXHJcbik7XHJcbmRlbGV0ZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBhdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIHtcclxuICAgIHBvcHVwOiB1cGRhdGVBdmF0YXJQb3B1cCxcclxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChhdmF0YXJQb3B1cElucHV0KSA9PiB7XHJcbiAgICAgIGFwaS51cGRhdGVBdmF0YXIoYXZhdGFyUG9wdXBJbnB1dC5hdmF0YXIpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGFwaS5nZXRVc2VySW5mbygpLnRoZW4oKGluZm8pID0+IHtcclxuICAgICAgICAgIHByb2ZpbGVBdmF0YXIuc3JjID0gaW5mby5hdmF0YXI7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXZhdGFyUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICBhdmF0YXJQb3B1cC5zZXRMb2FkaW5nU3RhdGUoZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBwb3B1cFNlbGVjdG9yc1xyXG4pO1xyXG5hdmF0YXJQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy89PT09PT09PT09PT09PT09PT09PT09PT1wb3B1cHMtb3BlbmluZy9jbG9zaW5nPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCBwcm9maWxlSW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgZWRpdFByb2ZpbGVGb3JtLmVsZW1lbnRzLm5hbWUudmFsdWUgPSBwcm9maWxlSW5mby5uYW1lO1xyXG4gIGVkaXRQcm9maWxlRm9ybS5lbGVtZW50cy5iaW8udmFsdWUgPSBwcm9maWxlSW5mby5iaW87XHJcbiAgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLnZhbGlkYXRlKCk7XHJcbiAgZWRpdFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5hZGRQbGFjZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBsYWNlRm9ybVZhbGlkYXRvci52YWxpZGF0ZSgpO1xyXG4gIHBsYWNlRm9ybVZhbGlkYXRvci5jbGVhcigpO1xyXG4gIHBsYWNlUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmVkaXRBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICB1cGRhdGVBdmF0YXJGb3JtVmFsaWRhdG9yLnZhbGlkYXRlKCk7XHJcbiAgdXBkYXRlQXZhdGFyRm9ybVZhbGlkYXRvci5jbGVhcigpO1xyXG4gIGF2YXRhclBvcHVwLm9wZW4oKTtcclxufSk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=