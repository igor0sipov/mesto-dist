(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._selectorsObject=e,this._currentForm=n,this._inputList=Array.from(n.querySelectorAll(this._selectorsObject.input))}var n,r;return n=t,(r=[{key:"_showError",value:function(e){this._errorElement=this._currentForm.querySelector(".".concat(e.id,"-error")),e.classList.add(this._selectorsObject.inputError),this._errorElement.textContent=e.validationMessage,this._errorElement.classList.add(this._selectorsObject.errorVisible)}},{key:"_hideError",value:function(e){this._errorElement=this._currentForm.querySelector(".".concat(e.id,"-error")),e.classList.remove(this._selectorsObject.inputError),this._errorElement.textContent="",this._errorElement.classList.remove(this._selectorsObject.errorVisible)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideError(e):this._showError(e)}},{key:"_hasInpvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){var e=this._currentForm.querySelector(this._selectorsObject.submitButton);this._hasInpvalidInput()?(e.setAttribute("disabled","true"),e.classList.add(this._selectorsObject.inactiveButton)):(e.classList.remove(this._selectorsObject.inactiveButton),e.removeAttribute("disabled"))}},{key:"_setListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"validate",value:function(){var e=this;this._inputList.forEach((function(t){e._checkInputValidity(t),e._toggleButtonState()}))}},{key:"clear",value:function(){var e=this;this._inputList.forEach((function(t){e._hideError(t)}))}},{key:"enableValidation",value:function(){this._currentForm.addEventListener("submit",(function(e){e.preventDefault()})),this._setListeners()}}])&&e(n.prototype,r),t}(),n=document.querySelector(".profile__edit-button"),r=document.querySelector(".profile__name"),o=document.querySelector(".profile__bio"),i=document.querySelector(".profile__avatar"),a=document.querySelector(".profile__edit-avatar-button"),u=document.querySelector(".update-avatar"),c=document.forms.updateAvatar,s=document.querySelector(".confirm-delete"),l=document.querySelector(".edit-profile"),f=document.forms.editProfileForm,h=document.querySelector(".profile__add-button"),p=document.querySelector(".add-place"),d=document.forms.addPlaceForm,_=document.querySelector(".elements"),y=document.querySelector(".fullsize-picture"),v="86dbbabbe99c68a05ddfc98c",m={form:".form",input:".popup__input",submitButton:".popup__submit-button",inactiveButton:"popup__submit-button_disabled",inputError:"popup__input_type_error",errorVisible:"popup__input-error_visible"},b={cardTemplate:".card-template",card:".element",picture:".element__picture",title:".element__name",likeButton:".element__like-button",likeButtonActive:"element__like-button_active",deleteButton:".element__delete-button",hiddenDeleteButton:"element__delete-button_hidden",likeCounter:".element__like-counter"},k={openedPopup:"popup_opened",form:".form",closeButton:".popup__close-icon",title:"popup__title",picture:".popup__picture",input:".popup__input",submitButton:".popup__submit-button",caption:".popup__caption"};function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t,this._selectors=n,this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add(this._selectors.openedPopup),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove(this._selectors.openedPopup),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_closeByOverlay",value:function(e){e.target===e.currentTarget&&this.close()}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(this._selectors.closeButton).addEventListener("click",(function(){e.close()})),this._popup.addEventListener("click",(function(t){e._closeByOverlay(t)}))}}])&&g(t.prototype,n),e}();function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(r);if(o){var n=P(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function a(e,t){var n,r=e.popup,o=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,r,t))._form=n._popup.querySelector(n._selectors.form),n._handleFormSubmit=o,n._submitButtonDefaultText=n._popup.querySelector(".popup__submit-button").textContent,n}return t=a,(n=[{key:"_getInputValues",value:function(){var e=Array.from(this._form.querySelectorAll(this._selectors.input)),t={};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"setLoadingState",value:function(e){this._popup.querySelector(".popup__submit-button").textContent=e?"Cохранение...":this._submitButtonDefaultText}},{key:"_submitHandler",value:function(e){this.setLoadingState(!0),e.preventDefault();var t=this._getInputValues();this._handleFormSubmit(t)}},{key:"close",value:function(){O(P(a.prototype),"close",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){O(P(a.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",this._submitHandler.bind(this))}}])&&E(t.prototype,n),a}(S);function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=function(){function e(t){var n=t.name,r=t.bio;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n,this._bio=r}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,bio:this._bio.textContent}}},{key:"setUserInfo",value:function(e){var t=e.newName,n=e.newBio;this._name.textContent=t,this._bio.textContent=n}}])&&B(t.prototype,n),e}();function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._token=t.token,this._userProfileUrl=t.userProfileUrl,this._cardsUrl=t.cardsUrl}var t,n;return t=e,(n=[{key:"_handleOriginalJsonResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"_handleOriginalResponse",value:function(e){return e.ok?e:Promise.reject("Ошибка: ".concat(e.status))}},{key:"getUserInfo",value:function(){return fetch(this._userProfileUrl,{headers:{authorization:this._token}}).then(this._handleOriginalJsonResponse).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"getCards",value:function(){return fetch(this._cardsUrl,{headers:{authorization:this._token}}).then(this._handleOriginalJsonResponse).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"editProfile",value:function(e){var t=e.name,n=e.about;return fetch(this._userProfileUrl,{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:n})}).then(this._handleOriginalJsonResponse).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return fetch(this._cardsUrl,{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:n})}).then(this._handleOriginalJsonResponse).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"deleteCard",value:function(e){return fetch(this._cardsUrl+e,{method:"DELETE",headers:{authorization:this._token}}).then(this._handleOriginalResponse).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"like",value:function(e){return fetch(this._cardsUrl+"likes/"+e,{method:"PUT",headers:{authorization:this._token}}).then(this._handleOriginalJsonResponse).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"removeLike",value:function(e){return fetch(this._cardsUrl+"likes/"+e,{method:"DELETE",headers:{authorization:this._token}}).then(this._handleOriginalJsonResponse).then((function(e){return e})).catch((function(e){console.log(e)}))}},{key:"updateAvatar",value:function(e){return fetch(this._userProfileUrl+"avatar/",{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then(this._handleOriginalJsonResponse).then((function(e){return e})).catch((function(e){console.log(e)}))}}])&&I(t.prototype,n),e}();function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(t,n,r){var o=t.data,i=t.handleCardClick,a=t.handleLikeButtonClick,u=t.handleDeleteButtonClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=o,this._handleCardClick=i,this._handleLikeButtonClick=a,this._handleDeleteButtonClick=u,this._selectors=n,this._myId=r}var t,n;return t=e,(n=[{key:"_openFullsizePhoto",value:function(){this._handleCardClick({image:this._data.link,title:this._data.name})}},{key:"_getTemplate",value:function(){return document.querySelector(this._selectors.cardTemplate).content.cloneNode(!0)}},{key:"_like",value:function(e){e.classList.add(this._selectors.likeButtonActive)}},{key:"_removeLike",value:function(e){e.classList.remove(this._selectors.likeButtonActive)}},{key:"_getMyLike",value:function(e){var t=this;return e.likes.some((function(e){return e._id===t._myId}))}},{key:"_setEventListeners",value:function(e){var t=this;e.likeButton.addEventListener("click",(function(){t._like(e.likeButton),t._handleLikeButtonClick(t._data._id).then((function(n){t._getMyLike(n)?(t._like(e.likeButton),e.likeCounter.textContent=n.likes.length):(t._removeLike(e.likeButton),e.likeCounter.textContent=n.likes.length)}))})),e.deleteButton.addEventListener("click",(function(){t._handleDeleteButtonClick(t._data._id)})),e.picture.addEventListener("click",this._openFullsizePhoto.bind(this))}},{key:"initializeCard",value:function(){var e=this._getTemplate(),t={card:e.querySelector(this._selectors.card),picture:e.querySelector(this._selectors.picture),title:e.querySelector(this._selectors.title),likeButton:e.querySelector(this._selectors.likeButton),likeCounter:e.querySelector(this._selectors.likeCounter),deleteButton:e.querySelector(this._selectors.deleteButton)};return this._setEventListeners(t),t.picture.src=this._data.link,t.title.textContent=this._data.name,t.card.id=this._data._id,this._data.likes&&(t.likeCounter.textContent=this._data.likes.length),this._data.owner._id!==this._myId&&t.deleteButton.classList.add(this._selectors.hiddenDeleteButton),this._getMyLike(this._data)&&this._like(t.likeButton),e}}])&&T(t.prototype,n),e}();function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=n}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}}])&&x(t.prototype,n),e}();function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t,n){return(V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=M(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=M(r);if(o){var n=M(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return N(this,e)});function a(){return F(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"open",value:function(e,t){var n=this._popup.querySelector(this._selectors.picture),r=this._popup.querySelector(this._selectors.caption);n.src=e,r.textContent=t,n.alt=t,V(M(a.prototype),"open",this).call(this)}}])&&z(t.prototype,n),a}(S);function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var G=new R({token:"fe948c7b-c7fe-4065-b9c1-1b820e5df7d7",userProfileUrl:"https://mesto.nomoreparties.co/v1/cohort-17/users/me/",cardsUrl:"https://mesto.nomoreparties.co/v1/cohort-17/cards/"});Promise.all([G.getUserInfo(),G.getCards()]).then((function(e){var t,n,a=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=a[0],c=a[1];r.textContent=u.name,o.textContent=u.about,i.src=u.avatar,ee(c)}));var K=new t(m,f);K.enableValidation();var Q=new t(m,d);Q.enableValidation();var W=new t(m,c);W.enableValidation();var X=new q({name:r,bio:o}),Y=new j({popup:l,handleFormSubmit:function(e){G.editProfile({name:e.name,about:e.bio}).then((function(){G.getUserInfo().then((function(e){X.setUserInfo({newName:e.name,newBio:e.about})})),Y.close(),Y.setLoadingState(!1)}))}},k);Y.setEventListeners();var Z=function(e){return new U({data:e,handleCardClick:function(e){var t=e.image,n=e.title;ne.open(t,n)},handleDeleteButtonClick:function(e){s.id=e,re.open()},handleLikeButtonClick:function(e){return G.getCards().then((function(t){var n=t.find((function(t){return t._id===e}));return n.likes.length>0&&n.likes.some((function(e){return e._id===v}))?G.removeLike(e):G.like(e)}))}},b,v)},ee=function(e){var t=new A({items:e,renderer:function(e){var n=Z(e).initializeCard();t.addItem(n)}},_);t.renderItems()},te=new j({popup:p,handleFormSubmit:function(e){G.addCard({name:e.title,link:e.url}).then((function(e){var t=Z(e).initializeCard();_.prepend(t),te.close(),te.setLoadingState(!1)}))}},k);te.setEventListeners();var ne=new H(y,k);ne.setEventListeners();var re=new j({popup:s,handleFormSubmit:function(){G.deleteCard(s.id).then((function(e){e.ok&&Array.from(document.querySelectorAll(".element")).find((function(e){return e.id===s.id})).remove(),re.close(),re.setLoadingState(!1)}))}},k);re.setEventListeners();var oe=new j({popup:u,handleFormSubmit:function(e){G.updateAvatar(e.avatar).then((function(){G.getUserInfo().then((function(e){i.src=e.avatar})),oe.close(),oe.setLoadingState(!1)}))}},k);oe.setEventListeners(),n.addEventListener("click",(function(){var e=X.getUserInfo();f.elements.name.value=e.name,f.elements.bio.value=e.bio,K.validate(),Y.open()})),h.addEventListener("click",(function(){Q.validate(),Q.clear(),te.open()})),a.addEventListener("click",(function(){W.validate(),W.clear(),oe.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJzZWxlY3RvcnNPYmplY3QiLCJjdXJyZW50Rm9ybSIsInRoaXMiLCJfc2VsZWN0b3JzT2JqZWN0IiwiX2N1cnJlbnRGb3JtIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dCIsImN1cnJlbnRJbnB1dCIsIl9lcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbnB1dEVycm9yIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yVmlzaWJsZSIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUVycm9yIiwiX3Nob3dFcnJvciIsInNvbWUiLCJpbnB1dEVsZW1lbnQiLCJfYnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvbiIsIl9oYXNJbnB2YWxpZElucHV0Iiwic2V0QXR0cmlidXRlIiwiaW5hY3RpdmVCdXR0b24iLCJyZW1vdmVBdHRyaWJ1dGUiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiX3NldExpc3RlbmVycyIsImVkaXRQcm9maWxlQnV0dG9uIiwiZG9jdW1lbnQiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVCaW8iLCJwcm9maWxlQXZhdGFyIiwiZWRpdEF2YXRhckJ1dHRvbiIsInVwZGF0ZUF2YXRhclBvcHVwIiwidXBkYXRlQXZhdGFyRm9ybSIsImZvcm1zIiwidXBkYXRlQXZhdGFyIiwiY29uZmlybURlbGV0ZVBvcHVwIiwiZWRpdFByb2ZpbGVQb3B1cCIsImVkaXRQcm9maWxlRm9ybSIsImFkZFBsYWNlQnV0dG9uIiwiYWRkUGxhY2VQb3B1cCIsImFkZFBsYWNlRm9ybSIsImVsZW1lbnRzIiwiZnVsbHNpemVQaWN0dXJlUG9wdXAiLCJteUlkIiwidmFsaWRhdGlvblNlbGVjdG9ycyIsImZvcm0iLCJjYXJkU2VsZWN0b3JzIiwiY2FyZFRlbXBsYXRlIiwiY2FyZCIsInBpY3R1cmUiLCJ0aXRsZSIsImxpa2VCdXR0b24iLCJsaWtlQnV0dG9uQWN0aXZlIiwiZGVsZXRlQnV0dG9uIiwiaGlkZGVuRGVsZXRlQnV0dG9uIiwibGlrZUNvdW50ZXIiLCJwb3B1cFNlbGVjdG9ycyIsIm9wZW5lZFBvcHVwIiwiY2xvc2VCdXR0b24iLCJjYXB0aW9uIiwiUG9wdXAiLCJwb3B1cCIsInNlbGVjdG9ycyIsIl9wb3B1cCIsIl9zZWxlY3RvcnMiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJjbG9zZSIsImtleSIsIl9jbG9zZUJ5T3ZlcmxheSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9zdWJtaXRCdXR0b25EZWZhdWx0VGV4dCIsImlucHV0TGlzdCIsImlucHV0VmFsdWVzIiwibmFtZSIsInZhbHVlIiwiaXNMb2FkaW5nIiwic2V0TG9hZGluZ1N0YXRlIiwicG9wdXBJbnB1dHMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIl9zdWJtaXRIYW5kbGVyIiwiVXNlckluZm8iLCJiaW8iLCJfbmFtZSIsIl9iaW8iLCJuZXdOYW1lIiwibmV3QmlvIiwiQXBpIiwiY29uZmlnIiwiX3Rva2VuIiwidG9rZW4iLCJfdXNlclByb2ZpbGVVcmwiLCJ1c2VyUHJvZmlsZVVybCIsIl9jYXJkc1VybCIsImNhcmRzVXJsIiwicmVzdWx0Iiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ0aGVuIiwiX2hhbmRsZU9yaWdpbmFsSnNvblJlc3BvbnNlIiwiZGF0YSIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibGluayIsIl9oYW5kbGVPcmlnaW5hbFJlc3BvbnNlIiwiYXZhdGFyIiwiQ2FyZCIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUxpa2VCdXR0b25DbGljayIsImhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrIiwiX2RhdGEiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VCdXR0b25DbGljayIsIl9oYW5kbGVEZWxldGVCdXR0b25DbGljayIsIl9teUlkIiwiaW1hZ2UiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZWxlbSIsImxpa2VzIiwibGlrZSIsIl9pZCIsImNhcmRFbGVtZW50cyIsIl9saWtlIiwibGlrZUluZm8iLCJfZ2V0TXlMaWtlIiwibGVuZ3RoIiwiX3JlbW92ZUxpa2UiLCJfb3BlbkZ1bGxzaXplUGhvdG8iLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzcmMiLCJvd25lciIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwiYXBwZW5kIiwiaXRlbSIsIlBvcHVwV2l0aEltYWdlIiwic291cmNlIiwicG9wdXBQaWN0dXJlIiwicG9wdXBDYXB0aW9uIiwiYWx0IiwiYXBpIiwiYWxsIiwiZ2V0VXNlckluZm8iLCJnZXRDYXJkcyIsInVzZXJEYXRhIiwiYmFzZUNhcmRzIiwicmVuZGVyQmFzZUNhcmRzIiwiZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBsYWNlRm9ybVZhbGlkYXRvciIsInVwZGF0ZUF2YXRhckZvcm1WYWxpZGF0b3IiLCJ1c2VySW5mbyIsImVkaXRQb3B1cCIsInByb2ZpbGVQb3B1cElucHV0cyIsImVkaXRQcm9maWxlIiwiaW5mbyIsInNldFVzZXJJbmZvIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZW5kZXJDYXJkcyIsImNhcmREYXRhIiwicGljdHVyZVBvcHVwIiwib3BlbiIsImRlbGV0ZVBvcHVwIiwiY2FyZHMiLCJmaW5kIiwicmVtb3ZlTGlrZSIsImNhcmRzSW5mb0FycmF5Iiwic2VjdGlvbiIsImNhcmRFbGVtZW50IiwiaW5pdGlhbGl6ZUNhcmQiLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiLCJwbGFjZVBvcHVwIiwicGxhY2VQb3B1cElucHV0cyIsImFkZENhcmQiLCJ1cmwiLCJjYXJkSW5mbyIsImRlbGV0ZUNhcmQiLCJhdmF0YXJQb3B1cCIsImF2YXRhclBvcHVwSW5wdXQiLCJwcm9maWxlSW5mbyIsInZhbGlkYXRlIiwiY2xlYXIiXSwibWFwcGluZ3MiOiI2TEFBcUJBLEUsV0FDbkIsV0FBWUMsRUFBaUJDLEksNEZBQWEsU0FDeENDLEtBQUtDLGlCQUFtQkgsRUFDeEJFLEtBQUtFLGFBQWVILEVBQ3BCQyxLQUFLRyxXQUFhQyxNQUFNQyxLQUN0Qk4sRUFBWU8saUJBQWlCTixLQUFL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Q2hKLEdBQUQsT0FBVUEsRUFBS2xELEtBQU9xQyxFQUFtQnJDLE1BQ3BDTyxTQUVkeUwsR0FBWXZILFFBQ1p1SCxHQUFZMUcsaUJBQWdCLFFBSWxDNUIsR0FFRnNJLEdBQVlMLG9CQUVaLElBQU1xQixHQUFjLElBQUlwSSxFQUN0QixDQUNFYixNQUFPOUIsRUFDUDRDLGlCQUFrQixTQUFDb0ksR0FDakJ2QyxFQUFJdEksYUFBYTZLLEVBQWlCbEYsUUFBUWIsTUFBSyxXQUM3Q3dELEVBQUlFLGNBQWMxRCxNQUFLLFNBQUN1RSxHQUN0QjFKLE1BQW9CMEosRUFBSzFELFVBRTNCaUYsR0FBWXZJLFFBQ1p1SSxHQUFZMUgsaUJBQWdCLFFBSWxDNUIsR0FFRnNKLEdBQVlyQixvQkFJWmhLLEVBQWtCTixpQkFBaUIsU0FBUyxXQUMxQyxJQUFNNkwsRUFBYzdCLEVBQVNULGNBQzdCckksc0JBQXNDMkssRUFBWS9ILEtBQ2xENUMscUJBQXFDMkssRUFBWXRILElBQ2pEcUYsRUFBeUJrQyxXQUN6QjdCLEVBQVVTLFVBR1p2SixFQUFlbkIsaUJBQWlCLFNBQVMsV0FDdkM4SixFQUFtQmdDLFdBQ25CaEMsRUFBbUJpQyxRQUNuQlYsR0FBV1gsVUFHYi9KLEVBQWlCWCxpQkFBaUIsU0FBUyxXQUN6QytKLEVBQTBCK0IsV0FDMUIvQixFQUEwQmdDLFFBQzFCSixHQUFZakIsVyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yc09iamVjdCwgY3VycmVudEZvcm0pIHtcbiAgICB0aGlzLl9zZWxlY3RvcnNPYmplY3QgPSBzZWxlY3RvcnNPYmplY3Q7XG4gICAgdGhpcy5fY3VycmVudEZvcm0gPSBjdXJyZW50Rm9ybTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgY3VycmVudEZvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZWxlY3RvcnNPYmplY3QuaW5wdXQpXG4gICAgKTtcbiAgfVxuXG4gIF9zaG93RXJyb3IoY3VycmVudElucHV0KSB7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fY3VycmVudEZvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtjdXJyZW50SW5wdXQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgY3VycmVudElucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5fc2VsZWN0b3JzT2JqZWN0LmlucHV0RXJyb3IpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGN1cnJlbnRJbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZWxlY3RvcnNPYmplY3QuZXJyb3JWaXNpYmxlKTtcbiAgfVxuXG4gIF9oaWRlRXJyb3IoY3VycmVudElucHV0KSB7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fY3VycmVudEZvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtjdXJyZW50SW5wdXQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgY3VycmVudElucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2VsZWN0b3JzT2JqZWN0LmlucHV0RXJyb3IpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2VsZWN0b3JzT2JqZWN0LmVycm9yVmlzaWJsZSk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGN1cnJlbnRJbnB1dCkge1xuICAgIGlmICghY3VycmVudElucHV0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93RXJyb3IoY3VycmVudElucHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUVycm9yKGN1cnJlbnRJbnB1dCk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0lucHZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGNvbnN0IF9idXR0b25FbGVtZW50ID0gdGhpcy5fY3VycmVudEZvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3NlbGVjdG9yc09iamVjdC5zdWJtaXRCdXR0b25cbiAgICApO1xuXG4gICAgaWYgKHRoaXMuX2hhc0lucHZhbGlkSW5wdXQoKSkge1xuICAgICAgX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZWxlY3RvcnNPYmplY3QuaW5hY3RpdmVCdXR0b24pO1xuICAgIH0gZWxzZSB7XG4gICAgICBfYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NlbGVjdG9yc09iamVjdC5pbmFjdGl2ZUJ1dHRvbik7XG4gICAgICBfYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICB9XG4gIH1cblxuICBfc2V0TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChjdXJyZW50SW5wdXQpID0+IHtcbiAgICAgIGN1cnJlbnRJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoY3VycmVudElucHV0KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgdmFsaWRhdGUoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGN1cnJlbnRJbnB1dCkgPT4ge1xuICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGN1cnJlbnRJbnB1dCk7XG4gICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGN1cnJlbnRJbnB1dCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUVycm9yKGN1cnJlbnRJbnB1dCk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIGNvbnN0IHN1Ym1pdEZvcm1IYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG4gICAgdGhpcy5fY3VycmVudEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBzdWJtaXRGb3JtSGFuZGxlcik7XG4gICAgdGhpcy5fc2V0TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQmlvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19iaW9cIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XHJcblxyXG5leHBvcnQgY29uc3QgZWRpdEF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fZWRpdC1hdmF0YXItYnV0dG9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHVwZGF0ZUF2YXRhclBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi51cGRhdGUtYXZhdGFyXCIpO1xyXG5leHBvcnQgY29uc3QgdXBkYXRlQXZhdGFyRm9ybSA9IGRvY3VtZW50LmZvcm1zLnVwZGF0ZUF2YXRhcjtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maXJtRGVsZXRlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbmZpcm0tZGVsZXRlXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtcHJvZmlsZVwiKTtcclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zLmVkaXRQcm9maWxlRm9ybTtcclxuXHJcbmV4cG9ydCBjb25zdCBhZGRQbGFjZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZFBsYWNlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1wbGFjZVwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZFBsYWNlRm9ybSA9IGRvY3VtZW50LmZvcm1zLmFkZFBsYWNlRm9ybTtcclxuXHJcbmV4cG9ydCBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNcIik7XHJcblxyXG5leHBvcnQgY29uc3QgZnVsbHNpemVQaWN0dXJlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZ1bGxzaXplLXBpY3R1cmVcIik7XHJcblxyXG5leHBvcnQgY29uc3QgbXlJZCA9IFwiODZkYmJhYmJlOTljNjhhMDVkZGZjOThjXCI7XHJcblxyXG5leHBvcnQgY29uc3QgYXBpQ29uZmlnID0ge1xyXG4gIHRva2VuOiBcImZlOTQ4YzdiLWM3ZmUtNDA2NS1iOWMxLTFiODIwZTVkZjdkN1wiLFxyXG4gIHVzZXJQcm9maWxlVXJsOiBcImh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMTcvdXNlcnMvbWUvXCIsXHJcbiAgY2FyZHNVcmw6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0xNy9jYXJkcy9cIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2VsZWN0b3JzID0ge1xyXG4gIGZvcm06IFwiLmZvcm1cIixcclxuICBpbnB1dDogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uOiBcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uOiBcInBvcHVwX19zdWJtaXQtYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvcjogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yVmlzaWJsZTogXCJwb3B1cF9faW5wdXQtZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRTZWxlY3RvcnMgPSB7XHJcbiAgY2FyZFRlbXBsYXRlOiBcIi5jYXJkLXRlbXBsYXRlXCIsXHJcbiAgY2FyZDogXCIuZWxlbWVudFwiLFxyXG4gIHBpY3R1cmU6IFwiLmVsZW1lbnRfX3BpY3R1cmVcIixcclxuICB0aXRsZTogXCIuZWxlbWVudF9fbmFtZVwiLFxyXG4gIGxpa2VCdXR0b246IFwiLmVsZW1lbnRfX2xpa2UtYnV0dG9uXCIsXHJcbiAgbGlrZUJ1dHRvbkFjdGl2ZTogXCJlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmVcIixcclxuICBkZWxldGVCdXR0b246IFwiLmVsZW1lbnRfX2RlbGV0ZS1idXR0b25cIixcclxuICBoaWRkZW5EZWxldGVCdXR0b246IFwiZWxlbWVudF9fZGVsZXRlLWJ1dHRvbl9oaWRkZW5cIixcclxuICBsaWtlQ291bnRlcjogXCIuZWxlbWVudF9fbGlrZS1jb3VudGVyXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcG9wdXBTZWxlY3RvcnMgPSB7XHJcbiAgb3BlbmVkUG9wdXA6IFwicG9wdXBfb3BlbmVkXCIsXHJcbiAgZm9ybTogXCIuZm9ybVwiLFxyXG4gIGNsb3NlQnV0dG9uOiBcIi5wb3B1cF9fY2xvc2UtaWNvblwiLFxyXG4gIHRpdGxlOiBcInBvcHVwX190aXRsZVwiLFxyXG4gIHBpY3R1cmU6IFwiLnBvcHVwX19waWN0dXJlXCIsXHJcbiAgaW5wdXQ6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvbjogXCIucG9wdXBfX3N1Ym1pdC1idXR0b25cIixcclxuICBjYXB0aW9uOiBcIi5wb3B1cF9fY2FwdGlvblwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHBsYWNlQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgdGl0bGU6IFwi0JDQu9GC0LDQuVwiLFxyXG4gICAgaW1hZ2U6XHJcbiAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MDAxMDE0NjA5NDItZjkxODU0YmU0MmU0P2l4bGliPXJiLTEuMi4xJml4aWQ9ZXlKaGNIQmZhV1FpT2pFeU1EZDkmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xMjY3JnE9ODBcIixcclxuICAgIGFsdDogXCLQlNC+0YDQvtCz0LAg0LIg0YXQstC+0LnQvdC+0Lwg0LvQtdGB0YNcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcItCV0LrQsNGC0LXRgNC40L3QsdGD0YDQs1wiLFxyXG4gICAgaW1hZ2U6XHJcbiAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MjY3MjIwMjExOTItMWMwZGM5YjA5MjFkP2l4bGliPXJiLTEuMi4xJml4aWQ9ZXlKaGNIQmZhV1FpT2pFeU1EZDkmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xNDg5JnE9ODBcIixcclxuICAgIGFsdDogXCLQpNC+0YLQviDQldC60LDRgtC10YDQuNC90LHRg9GA0LPQsCDRgSDQstGL0YHQvtGC0YtcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcItCa0LjQvdC10YDQvNCwXCIsXHJcbiAgICBpbWFnZTpcclxuICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU1OTAyOTg4NC00ZTM0MDkzZGI1Yjc/aXhsaWI9cmItMS4yLjEmaXhpZD1leUpoY0hCZmFXUWlPakl4TVRJemZRJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9MTM0OSZxPTgwXCIsXHJcbiAgICBhbHQ6IFwi0JTQstCwINC00LXRgNC10LLRj9C90L3Ri9GFINC00L7QvNC40LrQsCwg0LjQtNC10YIg0YHQvdC10LNcIixcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcItCa0LDQu9GD0LPQsFwiLFxyXG4gICAgaW1hZ2U6XHJcbiAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MDU1NTEwNzE0ODctZDRhM2ZkMzg0ODU3P2l4bGliPXJiLTEuMi4xJml4aWQ9ZXlKaGNIQmZhV1FpT2pFeU1EZDkmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xNDg5JnE9ODBcIixcclxuICAgIGFsdDogXCLQoNC10LrQsCDQsiDQu9C10YHRgyDQvtC60YPRgtCw0L3QsCDRgtGD0LzQsNC90L7QvFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwi0KXQuNC50LTQtdC90YHQtdC70YzQs9CwXCIsXHJcbiAgICBpbWFnZTpcclxuICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU1OTAyOTg4NC1lOTU5MjQ5MjM2Mjk/aXhsaWI9cmItMS4yLjEmaXhpZD1leUpoY0hCZmFXUWlPakV5TURkOSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTEzNTAmcT04MFwiLFxyXG4gICAgYWx0OiBcItCU0LLQsCDQtNC10YDQtdCy0Y/QvdC90YvRhSDQtNC+0LzQuNC60LAg0LIg0YHQvdC10LPRgyDRgyDRgNC10LrQuCDQvdCwINCx0LXRgNC10LPRgyDQutC+0YLRgNC+0Lkg0LvQvtC00LrQsFwiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGl0bGU6IFwi0JTRg9C90LjQu9C+0LLQvlwiLFxyXG4gICAgaW1hZ2U6XHJcbiAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NzA1Nzk0MjUxNDQtNDZiY2YwNjRkYjg0P2l4bGliPXJiLTEuMi4xJml4aWQ9ZXlKaGNIQmZhV1FpT2pFeU1EZDkmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz02NzUmcT04MFwiLFxyXG4gICAgYWx0OiBcItCm0LXRgNC60L7QstGMINGB0YDQtdC00Lgg0LTQtdGA0LXQstGM0LXQsiDQsiDQv9C+0LvQtVwiLFxyXG4gIH0sXHJcbl07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXAsIHNlbGVjdG9ycykge1xuICAgIHRoaXMuX3BvcHVwID0gcG9wdXA7XG4gICAgdGhpcy5fc2VsZWN0b3JzID0gc2VsZWN0b3JzO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZWxlY3RvcnMub3BlbmVkUG9wdXApO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NlbGVjdG9ycy5vcGVuZWRQb3B1cCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9jbG9zZUJ5T3ZlcmxheShldnQpIHtcbiAgICBpZiAoZXZ0LnRhcmdldCAhPT0gZXZ0LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5jbG9zZSgpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9ycy5jbG9zZUJ1dHRvbilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9KTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgdGhpcy5fY2xvc2VCeU92ZXJsYXkoZXZ0KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXAsIGhhbmRsZUZvcm1TdWJtaXQgfSwgc2VsZWN0b3JzKSB7XG4gICAgc3VwZXIocG9wdXAsIHNlbGVjdG9ycyk7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzLmZvcm0pO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkRlZmF1bHRUZXh0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnBvcHVwX19zdWJtaXQtYnV0dG9uXCJcbiAgICApLnRleHRDb250ZW50O1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2VsZWN0b3JzLmlucHV0KVxuICAgICk7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gIH1cblxuICBzZXRMb2FkaW5nU3RhdGUoaXNMb2FkaW5nKSB7XG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc3VibWl0LWJ1dHRvblwiKTtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIkPQvtGF0YDQsNC90LXQvdC40LUuLi5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uRGVmYXVsdFRleHQ7XG4gICAgfVxuICB9XG5cbiAgX3N1Ym1pdEhhbmRsZXIoZXZlbnQpIHtcbiAgICB0aGlzLnNldExvYWRpbmdTdGF0ZSh0cnVlKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHBvcHVwSW5wdXRzID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHBvcHVwSW5wdXRzKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX3N1Ym1pdEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBiaW8gfSkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2JpbyA9IGJpbztcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgYmlvOiB0aGlzLl9iaW8udGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmV3TmFtZSwgbmV3QmlvIH0pIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmV3TmFtZTtcbiAgICB0aGlzLl9iaW8udGV4dENvbnRlbnQgPSBuZXdCaW87XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XHJcbiAgICB0aGlzLl90b2tlbiA9IGNvbmZpZy50b2tlbjtcclxuICAgIHRoaXMuX3VzZXJQcm9maWxlVXJsID0gY29uZmlnLnVzZXJQcm9maWxlVXJsO1xyXG4gICAgdGhpcy5fY2FyZHNVcmwgPSBjb25maWcuY2FyZHNVcmw7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlT3JpZ2luYWxKc29uUmVzcG9uc2UocmVzdWx0KSB7XHJcbiAgICBpZiAoIXJlc3VsdC5vaykge1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXN1bHQuc3RhdHVzfWApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdC5qc29uKCk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlT3JpZ2luYWxSZXNwb25zZShyZXN1bHQpIHtcclxuICAgIGlmICghcmVzdWx0Lm9rKSB7XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlc3VsdC5zdGF0dXN9YCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fdXNlclByb2ZpbGVVcmwsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlT3JpZ2luYWxKc29uUmVzcG9uc2UpXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9jYXJkc1VybCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVPcmlnaW5hbEpzb25SZXNwb25zZSlcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGVkaXRQcm9maWxlKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX3VzZXJQcm9maWxlVXJsLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBhYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVPcmlnaW5hbEpzb25SZXNwb25zZSlcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9jYXJkc1VybCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGxpbms6IGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlT3JpZ2luYWxKc29uUmVzcG9uc2UpXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fY2FyZHNVcmwgKyBpZCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZU9yaWdpbmFsUmVzcG9uc2UpXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBsaWtlKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fY2FyZHNVcmwgKyBcImxpa2VzL1wiICsgaWQsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVPcmlnaW5hbEpzb25SZXNwb25zZSlcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUxpa2UoaWQpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9jYXJkc1VybCArIFwibGlrZXMvXCIgKyBpZCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZU9yaWdpbmFsSnNvblJlc3BvbnNlKVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlQXZhdGFyKGF2YXRhcikge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX3VzZXJQcm9maWxlVXJsICsgXCJhdmF0YXIvXCIsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogYXZhdGFyLFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZU9yaWdpbmFsSnNvblJlc3BvbnNlKVxyXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUxpa2VCdXR0b25DbGljaywgaGFuZGxlRGVsZXRlQnV0dG9uQ2xpY2sgfSxcbiAgICBjYXJkU2VsZWN0b3JzLFxuICAgIG15SWRcbiAgKSB7XG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b25DbGljayA9IGhhbmRsZUxpa2VCdXR0b25DbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b25DbGljayA9IGhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrO1xuICAgIHRoaXMuX3NlbGVjdG9ycyA9IGNhcmRTZWxlY3RvcnM7XG4gICAgdGhpcy5fbXlJZCA9IG15SWQ7XG4gIH1cblxuICBfb3BlbkZ1bGxzaXplUGhvdG8oKSB7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHtcbiAgICAgIGltYWdlOiB0aGlzLl9kYXRhLmxpbmssXG4gICAgICB0aXRsZTogdGhpcy5fZGF0YS5uYW1lLFxuICAgIH0pO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IF90ZW1wbGF0ZUNvbnRlbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZSlcbiAgICAgIC5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gX3RlbXBsYXRlQ29udGVudDtcbiAgfVxuXG4gIF9saWtlKGVsZW0pIHtcbiAgICBlbGVtLmNsYXNzTGlzdC5hZGQodGhpcy5fc2VsZWN0b3JzLmxpa2VCdXR0b25BY3RpdmUpO1xuICB9XG5cbiAgX3JlbW92ZUxpa2UoZWxlbSkge1xuICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZWxlY3RvcnMubGlrZUJ1dHRvbkFjdGl2ZSk7XG4gIH1cblxuICBfZ2V0TXlMaWtlKGRhdGEpIHtcbiAgICByZXR1cm4gZGF0YS5saWtlcy5zb21lKChsaWtlKSA9PiBsaWtlLl9pZCA9PT0gdGhpcy5fbXlJZCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoY2FyZEVsZW1lbnRzKSB7XG4gICAgY2FyZEVsZW1lbnRzLmxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2xpa2UoY2FyZEVsZW1lbnRzLmxpa2VCdXR0b24pO1xuICAgICAgY29uc3QgbGlrZURhdGEgPSB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uQ2xpY2sodGhpcy5fZGF0YS5faWQpO1xuICAgICAgbGlrZURhdGEudGhlbigobGlrZUluZm8pID0+IHtcbiAgICAgICAgY29uc3QgaGFzTGlrZSA9IHRoaXMuX2dldE15TGlrZShsaWtlSW5mbyk7XG4gICAgICAgIGlmIChoYXNMaWtlKSB7XG4gICAgICAgICAgdGhpcy5fbGlrZShjYXJkRWxlbWVudHMubGlrZUJ1dHRvbik7XG4gICAgICAgICAgY2FyZEVsZW1lbnRzLmxpa2VDb3VudGVyLnRleHRDb250ZW50ID0gbGlrZUluZm8ubGlrZXMubGVuZ3RoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX3JlbW92ZUxpa2UoY2FyZEVsZW1lbnRzLmxpa2VCdXR0b24pO1xuICAgICAgICAgIGNhcmRFbGVtZW50cy5saWtlQ291bnRlci50ZXh0Q29udGVudCA9IGxpa2VJbmZvLmxpa2VzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBjYXJkRWxlbWVudHMuZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b25DbGljayh0aGlzLl9kYXRhLl9pZCk7XG4gICAgfSk7XG5cbiAgICBjYXJkRWxlbWVudHMucGljdHVyZS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjbGlja1wiLFxuICAgICAgdGhpcy5fb3BlbkZ1bGxzaXplUGhvdG8uYmluZCh0aGlzKVxuICAgICk7XG4gIH1cblxuICBpbml0aWFsaXplQ2FyZCgpIHtcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIGNvbnN0IGNhcmRFbGVtZW50cyA9IHtcbiAgICAgIGNhcmQ6IGNhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9ycy5jYXJkKSxcbiAgICAgIHBpY3R1cmU6IGNhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9ycy5waWN0dXJlKSxcbiAgICAgIHRpdGxlOiBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnMudGl0bGUpLFxuICAgICAgbGlrZUJ1dHRvbjogY2FyZFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzLmxpa2VCdXR0b24pLFxuICAgICAgbGlrZUNvdW50ZXI6IGNhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9ycy5saWtlQ291bnRlciksXG4gICAgICBkZWxldGVCdXR0b246IGNhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9ycy5kZWxldGVCdXR0b24pLFxuICAgIH07XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoY2FyZEVsZW1lbnRzKTtcblxuICAgIGNhcmRFbGVtZW50cy5waWN0dXJlLnNyYyA9IHRoaXMuX2RhdGEubGluaztcbiAgICBjYXJkRWxlbWVudHMudGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9kYXRhLm5hbWU7XG4gICAgY2FyZEVsZW1lbnRzLmNhcmQuaWQgPSB0aGlzLl9kYXRhLl9pZDtcblxuICAgIGlmICh0aGlzLl9kYXRhLmxpa2VzKSB7XG4gICAgICBjYXJkRWxlbWVudHMubGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9kYXRhLmxpa2VzLmxlbmd0aDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZGF0YS5vd25lci5faWQgIT09IHRoaXMuX215SWQpIHtcbiAgICAgIGNhcmRFbGVtZW50cy5kZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZChcbiAgICAgICAgdGhpcy5fc2VsZWN0b3JzLmhpZGRlbkRlbGV0ZUJ1dHRvblxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBoYXNMaWtlID0gdGhpcy5fZ2V0TXlMaWtlKHRoaXMuX2RhdGEpO1xuICAgIGlmIChoYXNMaWtlKSB7XG4gICAgICB0aGlzLl9saWtlKGNhcmRFbGVtZW50cy5saWtlQnV0dG9uKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2FyZFRlbXBsYXRlO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBvcGVuKHNvdXJjZSwgdGl0bGUpIHtcbiAgICBjb25zdCBwb3B1cFBpY3R1cmUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9ycy5waWN0dXJlKTtcbiAgICBjb25zdCBwb3B1cENhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9ycy5jYXB0aW9uKTtcbiAgICBwb3B1cFBpY3R1cmUuc3JjID0gc291cmNlO1xuICAgIHBvcHVwQ2FwdGlvbi50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgIHBvcHVwUGljdHVyZS5hbHQgPSB0aXRsZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHtcclxuICBlZGl0UHJvZmlsZUJ1dHRvbixcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlQmlvLFxyXG4gIGVkaXRQcm9maWxlUG9wdXAsXHJcbiAgZWRpdFByb2ZpbGVGb3JtLFxyXG4gIGFkZFBsYWNlQnV0dG9uLFxyXG4gIGFkZFBsYWNlUG9wdXAsXHJcbiAgYWRkUGxhY2VGb3JtLFxyXG4gIGNvbmZpcm1EZWxldGVQb3B1cCxcclxuICBlbGVtZW50cyxcclxuICBmdWxsc2l6ZVBpY3R1cmVQb3B1cCxcclxuICB2YWxpZGF0aW9uU2VsZWN0b3JzLFxyXG4gIGNhcmRTZWxlY3RvcnMsXHJcbiAgcG9wdXBTZWxlY3RvcnMsXHJcbiAgbXlJZCxcclxuICBhcGlDb25maWcsXHJcbiAgcHJvZmlsZUF2YXRhcixcclxuICBlZGl0QXZhdGFyQnV0dG9uLFxyXG4gIHVwZGF0ZUF2YXRhclBvcHVwLFxyXG4gIHVwZGF0ZUF2YXRhckZvcm0sXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5cclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5cclxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09QVBJPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpQ29uZmlnKTtcclxuXHJcblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldENhcmRzKCldKS50aGVuKFxyXG4gIChbdXNlckRhdGEsIGJhc2VDYXJkc10pID0+IHtcclxuICAgIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gdXNlckRhdGEubmFtZTtcclxuICAgIHByb2ZpbGVCaW8udGV4dENvbnRlbnQgPSB1c2VyRGF0YS5hYm91dDtcclxuICAgIHByb2ZpbGVBdmF0YXIuc3JjID0gdXNlckRhdGEuYXZhdGFyO1xyXG4gICAgcmVuZGVyQmFzZUNhcmRzKGJhc2VDYXJkcyk7XHJcbiAgfVxyXG4pO1xyXG5cclxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09dmFsaWRhdGlvbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvblNlbGVjdG9ycyxcclxuICBlZGl0UHJvZmlsZUZvcm1cclxuKTtcclxuZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHBsYWNlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZWxlY3RvcnMsIGFkZFBsYWNlRm9ybSk7XHJcbnBsYWNlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCB1cGRhdGVBdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvblNlbGVjdG9ycyxcclxuICB1cGRhdGVBdmF0YXJGb3JtXHJcbik7XHJcbnVwZGF0ZUF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1wb3B1cHM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWU6IHByb2ZpbGVOYW1lLFxyXG4gIGJpbzogcHJvZmlsZUJpbyxcclxufSk7XHJcblxyXG5jb25zdCBlZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICB7XHJcbiAgICBwb3B1cDogZWRpdFByb2ZpbGVQb3B1cCxcclxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChwcm9maWxlUG9wdXBJbnB1dHMpID0+IHtcclxuICAgICAgYXBpXHJcbiAgICAgICAgLmVkaXRQcm9maWxlKHtcclxuICAgICAgICAgIG5hbWU6IHByb2ZpbGVQb3B1cElucHV0cy5uYW1lLFxyXG4gICAgICAgICAgYWJvdXQ6IHByb2ZpbGVQb3B1cElucHV0cy5iaW8sXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICBhcGkuZ2V0VXNlckluZm8oKS50aGVuKChpbmZvKSA9PiB7XHJcbiAgICAgICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgICAgICAgICBuZXdOYW1lOiBpbmZvLm5hbWUsXHJcbiAgICAgICAgICAgICAgbmV3QmlvOiBpbmZvLmFib3V0LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgZWRpdFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgICBlZGl0UG9wdXAuc2V0TG9hZGluZ1N0YXRlKGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBwb3B1cFNlbGVjdG9yc1xyXG4pO1xyXG5lZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHJlbmRlckNhcmRzID0gKGNhcmREYXRhKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAge1xyXG4gICAgICBkYXRhOiBjYXJkRGF0YSxcclxuICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoeyBpbWFnZSwgdGl0bGUgfSkgPT4ge1xyXG4gICAgICAgIHBpY3R1cmVQb3B1cC5vcGVuKGltYWdlLCB0aXRsZSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrOiAoaWQpID0+IHtcclxuICAgICAgICBjb25maXJtRGVsZXRlUG9wdXAuaWQgPSBpZDtcclxuICAgICAgICBkZWxldGVQb3B1cC5vcGVuKCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGhhbmRsZUxpa2VCdXR0b25DbGljazogKGlkKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGFwaS5nZXRDYXJkcygpLnRoZW4oKGNhcmRzKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBjYXJkID0gY2FyZHMuZmluZCgoaXRlbSkgPT4gaXRlbS5faWQgPT09IGlkKTsgLy8g0LLRi9Cx0LjRgNCw0LXQvCDQvdGD0LbQvdGD0Y4g0LrQsNGA0YLQvtGH0LrRg1xyXG4gICAgICAgICAgaWYgKGNhcmQubGlrZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyDQv9GA0L7QstC10YDRj9C10Lwg0L3QsNC70LjRh9C40LUg0LvQsNC50LrQvtCyXHJcbiAgICAgICAgICAgIGNvbnN0IGhhc0xpa2UgPSBjYXJkLmxpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSBteUlkKTtcclxuICAgICAgICAgICAgaWYgKGhhc0xpa2UpIHtcclxuICAgICAgICAgICAgICAvLyDQv9GA0L7QstC10YDRj9C10Lwg0L3QsNC70LjRh9C40LUg0LzQvtC10LPQviDQu9Cw0LnQutCwXHJcbiAgICAgICAgICAgICAgcmV0dXJuIGFwaS5yZW1vdmVMaWtlKGlkKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZXR1cm4gYXBpLmxpa2UoaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gYXBpLmxpa2UoaWQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIGNhcmRTZWxlY3RvcnMsXHJcbiAgICBteUlkXHJcbiAgKTtcclxuICByZXR1cm4gY2FyZDtcclxufTtcclxuXHJcbmNvbnN0IHJlbmRlckJhc2VDYXJkcyA9IChjYXJkc0luZm9BcnJheSkgPT4ge1xyXG4gIGNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICAgIHtcclxuICAgICAgaXRlbXM6IGNhcmRzSW5mb0FycmF5LFxyXG4gICAgICByZW5kZXJlcjogKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZCA9IHJlbmRlckNhcmRzKGNhcmREYXRhKTtcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuaW5pdGlhbGl6ZUNhcmQoKTtcclxuICAgICAgICBzZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIGVsZW1lbnRzXHJcbiAgKTtcclxuICBzZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbn07XHJcblxyXG5jb25zdCBwbGFjZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAge1xyXG4gICAgcG9wdXA6IGFkZFBsYWNlUG9wdXAsXHJcbiAgICBoYW5kbGVGb3JtU3VibWl0OiAocGxhY2VQb3B1cElucHV0cykgPT4ge1xyXG4gICAgICBhcGlcclxuICAgICAgICAuYWRkQ2FyZCh7XHJcbiAgICAgICAgICBuYW1lOiBwbGFjZVBvcHVwSW5wdXRzLnRpdGxlLFxyXG4gICAgICAgICAgbGluazogcGxhY2VQb3B1cElucHV0cy51cmwsXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigoY2FyZEluZm8pID0+IHtcclxuICAgICAgICAgIGNvbnN0IGNhcmQgPSByZW5kZXJDYXJkcyhjYXJkSW5mbyk7XHJcbiAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuaW5pdGlhbGl6ZUNhcmQoKTtcclxuICAgICAgICAgIGVsZW1lbnRzLnByZXBlbmQoY2FyZEVsZW1lbnQpO1xyXG4gICAgICAgICAgcGxhY2VQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgcGxhY2VQb3B1cC5zZXRMb2FkaW5nU3RhdGUoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIHBvcHVwU2VsZWN0b3JzXHJcbik7XHJcbnBsYWNlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHBpY3R1cmVQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShmdWxsc2l6ZVBpY3R1cmVQb3B1cCwgcG9wdXBTZWxlY3RvcnMpO1xyXG5waWN0dXJlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGRlbGV0ZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAge1xyXG4gICAgcG9wdXA6IGNvbmZpcm1EZWxldGVQb3B1cCxcclxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6ICgpID0+IHtcclxuICAgICAgYXBpLmRlbGV0ZUNhcmQoY29uZmlybURlbGV0ZVBvcHVwLmlkKS50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICBpZiAocmVzdWx0Lm9rKSB7XHJcbiAgICAgICAgICBjb25zdCBjdXJyZW50Q2FyZCA9IEFycmF5LmZyb20oXHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZWxlbWVudFwiKVxyXG4gICAgICAgICAgKS5maW5kKChjYXJkKSA9PiBjYXJkLmlkID09PSBjb25maXJtRGVsZXRlUG9wdXAuaWQpO1xyXG4gICAgICAgICAgY3VycmVudENhcmQucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZVBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgZGVsZXRlUG9wdXAuc2V0TG9hZGluZ1N0YXRlKGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgcG9wdXBTZWxlY3RvcnNcclxuKTtcclxuZGVsZXRlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAge1xyXG4gICAgcG9wdXA6IHVwZGF0ZUF2YXRhclBvcHVwLFxyXG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogKGF2YXRhclBvcHVwSW5wdXQpID0+IHtcclxuICAgICAgYXBpLnVwZGF0ZUF2YXRhcihhdmF0YXJQb3B1cElucHV0LmF2YXRhcikudGhlbigoKSA9PiB7XHJcbiAgICAgICAgYXBpLmdldFVzZXJJbmZvKCkudGhlbigoaW5mbykgPT4ge1xyXG4gICAgICAgICAgcHJvZmlsZUF2YXRhci5zcmMgPSBpbmZvLmF2YXRhcjtcclxuICAgICAgICB9KTtcclxuICAgICAgICBhdmF0YXJQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgIGF2YXRhclBvcHVwLnNldExvYWRpbmdTdGF0ZShmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIHBvcHVwU2VsZWN0b3JzXHJcbik7XHJcbmF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLz09PT09PT09PT09PT09PT09PT09PT09PXBvcHVwcy1vcGVuaW5nL2Nsb3Npbmc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHByb2ZpbGVJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBlZGl0UHJvZmlsZUZvcm0uZWxlbWVudHMubmFtZS52YWx1ZSA9IHByb2ZpbGVJbmZvLm5hbWU7XHJcbiAgZWRpdFByb2ZpbGVGb3JtLmVsZW1lbnRzLmJpby52YWx1ZSA9IHByb2ZpbGVJbmZvLmJpbztcclxuICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IudmFsaWRhdGUoKTtcclxuICBlZGl0UG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmFkZFBsYWNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcGxhY2VGb3JtVmFsaWRhdG9yLnZhbGlkYXRlKCk7XHJcbiAgcGxhY2VGb3JtVmFsaWRhdG9yLmNsZWFyKCk7XHJcbiAgcGxhY2VQb3B1cC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuZWRpdEF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHVwZGF0ZUF2YXRhckZvcm1WYWxpZGF0b3IudmFsaWRhdGUoKTtcclxuICB1cGRhdGVBdmF0YXJGb3JtVmFsaWRhdG9yLmNsZWFyKCk7XHJcbiAgYXZhdGFyUG9wdXAub3BlbigpO1xyXG59KTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==